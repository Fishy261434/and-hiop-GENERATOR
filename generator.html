<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>And Hiop Generator</title>
  <style>
    body {
      background-color:#0d0d0d; color:#0f0; font-family:"Courier New",monospace;
      text-align:center; padding:40px;
    }
    h1 {font-size:28px;color:#f00;margin-bottom:10px}
    .classified{background:#220000;border:2px dashed #f00;padding:5px 10px;
      font-weight:bold;margin-bottom:30px;display:inline-block}
    textarea{background:#000;color:#0f0;border:1px solid #0f0;width:90%;height:120px;
      font-size:16px;padding:10px;margin-bottom:20px;resize:vertical}
    button{background:#001100;color:#0f0;border:2px solid #0f0;padding:10px 20px;
      font-size:18px;margin:0 4px 15px;cursor:pointer}
    button:hover{background:#003300}
    #usage-info{font-weight:bold;margin-bottom:20px}
    .label{font-style:italic;margin:5px}
    footer{margin-top:30px;font-size:14px}
  </style>
</head>
<body>
  <h1>AND HIOP GENERATOR</h1>
  <div class="classified">CLASSIFIED ENCRYPTION INTERFACE</div>

  <div class="label">INPUT</div>
  <textarea id="input" placeholder="Type something with 'and hiop' in it..."></textarea><br>

  <button onclick="convert()">ENCRYPT</button>
  <button onclick="resetUsage()">RESET&nbsp;USAGE</button>

  <div id="usage-info">Variants used: 0 / 5000</div>

  <div class="label">OUTPUT</div>
  <textarea id="output" readonly placeholder="Result will appear here..."></textarea>

  <footer>
    Stealth variant pool: 5â€¯000 unique disguises â€¢ Refresh page to reset
  </footer>

<script>
/* ---------- CONFIG ---------- */
const POOL_SIZE   = 5000;
const STORAGE_KEY = 'andHiopVariantIndex';
const ZW          = '\u200B';  // zeroâ€‘width space
const NBSP        = '\u00A0';  // nonâ€‘breaking space

/* ---------- HOMOGLYPHS ---------- */
const charVariants = {
  a: [
    'a', 'Ð°',            // Latin, Cyrillic
    'Î±',                 // Greek alpha
    'ðš', 'ðšŠ', 'ï½'       // math bold, monospace, fullâ€‘width
  ],
  n: [
    'n', 'Ð¿',            // Latin, Cyrillic pe
    'ð—»', 'ðš—', 'ï½Ž',      // bold (maybe thicker), monospace, fullâ€‘width
    'n'+ZW, 'n'+NBSP
  ],
  d: [
    'd', 'Ð´',            // Latin, Cyrillic de
    'ð', 'ðš', 'ï½„',      // bold, monospace, fullâ€‘width
    'd'+ZW, 'd'+NBSP
  ],
  ' ': [' ', ZW, NBSP],  // normal, zeroâ€‘width, nonâ€‘breaking
  h: [
    'h', 'Ò»',            // Latin, Cyrillic shha
    'ð¡', 'ðš‘', 'ï½ˆ',
    'h'+ZW, 'h'+NBSP
  ],
  i: [
    'i', 'Ñ–',            // Latin, Cyrillic i
    'Î¹',                 // Greek iota
    'ð¢', 'ðš’', 'ï½‰',
    'i'+ZW, 'i'+NBSP
  ],
  o: [
    'o', 'Ð¾',            // Latin, Cyrillic o
    'Î¿',                 // Greek omicron
    'ð¨', 'ðš˜', 'ï½',
    'o'+ZW, 'o'+NBSP
  ],
  p: [
    'p', 'Ñ€',            // Latin, Cyrillic er
    'ð©', 'ðš™', 'ï½',
    'p'+ZW, 'p'+NBSP
  ]
};

/* ---------- POOL BUILD ---------- */
function cartesian(current, keys, out){
  if(current.length===keys.length){ out.push(current.join('')); return; }
  const key = keys[current.length];
  for(const choice of charVariants[key]) cartesian([...current,choice],keys,out);
}
function buildVariantPool(size){
  const all=[]; cartesian([],['a','n','d',' ','h','i','o','p'],all);
  for(let i=all.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [all[i],all[j]]=[all[j],all[i]]; }
  return all.slice(0,size);
}
const VARIANTS = buildVariantPool(POOL_SIZE);

/* ---------- STATE ---------- */
let variantIndex = parseInt(localStorage.getItem(STORAGE_KEY)) || 0;

/* ---------- HELPERS ---------- */
function applyCase(sample, variant){
  if(sample===sample.toUpperCase()) return variant.toUpperCase();
  if(sample[0]===sample[0].toUpperCase()) return variant[0].toUpperCase()+variant.slice(1);
  return variant.toLowerCase();
}
function updateUsage(){
  document.getElementById('usage-info').textContent =
    `Variants used: ${variantIndex} / ${POOL_SIZE}`;
}

/* ---------- CORE ---------- */
function stealthify(text){
  return text.replace(/and hiop/gi, match=>{
    if(variantIndex>=POOL_SIZE) return match;          // out of ammo
    const obf = applyCase(match, VARIANTS[variantIndex]);
    variantIndex++;
    localStorage.setItem(STORAGE_KEY, variantIndex);   // persist
    updateUsage();
    return obf;
  });
}
function convert(){
  document.getElementById('output').value =
    stealthify(document.getElementById('input').value);
  updateUsage();
}
function resetUsage(){
  variantIndex = 0;
  localStorage.removeItem(STORAGE_KEY);
  updateUsage();
  alert('Usage counter reset. Pool is fresh!');
}

/* ---------- INIT ---------- */
updateUsage();
</script>
</body>
</html>
